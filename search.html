---
layout: default
title: Search - Avdhesh Kushwah Official
permalink: /search/
---

<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <h1 class="text-center mb-4">Site Search</h1>
      
      <input type="text" id="search-input" class="form-control form-control-lg mb-3" 
             placeholder="Search books, gallery, movies..." autocomplete="off">
      
      <div id="search-status" class="mb-3 text-center text-success"></div>
      <div id="search-results"></div>
    </div>
  </div>
</div>

<!-- Lunr.js -->
<script src="https://unpkg.com/lunr/lunr.js"></script>

<script>
// Auto-generated search data from Jekyll
const searchData = [
  {% for page in site.html_pages %}
  {
    "url": "{{ page.url | relative_url }}",
    "title": {{ page.title | default: page.name | remove: '.html' | replace: '-', ' ' | capitalize | jsonify }},
    "body": {{ page.content | strip_html | truncate: 200 | jsonify }}
  }{% unless forloop.last %},{% endunless %}
  {% endfor %}
];

// Build index
const idx = lunr(function () {
  this.ref('url');
  this.field('title');
  this.field('body');
  searchData.forEach(doc => this.add(doc));
});

document.getElementById('search-status').innerHTML = `Ready! ${searchData.length} pages indexed.`;

document.getElementById('search-input').addEventListener('input', function() {
  const query = this.value.trim();
  const resultsEl = document.getElementById('search-results');
  
  if (!query) {
    resultsEl.innerHTML = '';
    return;
  }

  const results = idx.search(query + '*');
  if (results.length === 0) {
    resultsEl.innerHTML = `<p class="text-muted text-center">No results for "<strong>${query}</strong>"</p>`;
    return;
  }

  resultsEl.innerHTML = results.map(res => {
    const doc = searchData.find(d => d.url === res.ref);
    return `
      <div class="card mb-3">
        <div class="card-body">
          <h5 class="card-title">
            <a href="${doc.url}" class="text-primary">${doc.title}</a>
          </h5>
          <p class="text-muted small mb-1">${doc.url}</p>
          <p class="text-secondary">${doc.body}</p>
        </div>
      </div>
    `;
  }).join('');
});
</script>

<style>
  .card { transition: 0.2s; }
  .card:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
</style>
